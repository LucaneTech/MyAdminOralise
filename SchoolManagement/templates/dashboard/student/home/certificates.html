{% extends 'dashboard/student/layouts/base.html' %}

{% block title %} Mes certificats {% endblock title %}

{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<div class="container-fluid mt-5">
  <div class="alert alert-warning d-flex align-items-center" role="alert">
    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Attention:">
      <use xlink:href="#exclamation-triangle-fill" />
    </svg>
    <div>
      Cette fonctionnalité n'est pas encore disponible. Elle arrivera bientôt !
    </div>
  </div>
</div>

<!-- Optionnel : icône Bootstrap -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
    <path
      d="M8.982 1.566a1.13 1.13 0 0 0-1.964 0L.165 13.233c-.457.778.091 1.767.982 1.767h13.706c.89 0 1.438-.99.982-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1-2.002 0 1 1 0 0 1 2.002 0z" />
  </symbol>
</svg>

{% endblock content %}

{% block javascripts %}{% endblock javascripts %}

{% comment "Header avec le titre de la page et le fil d'Ariane (breadcrumb)" %}
<div class="header pb-6" style="background-color:#147a81;">
  <div class="container-fluid">
    <div class="header-body">
      <div class="row align-items-center py-4">
        <div class="col-lg-6 col-7">
          {% comment "Titre principal de la page" %}
          <h6 class="h2 text-white d-inline-block mb-0">Mes certificats</h6>

          {% comment "Fil d'Ariane (breadcrumb) pour la navigation" %}
          <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
            <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
              {% comment "Lien vers le tableau de bord principal" %}
              <li class="breadcrumb-item">
                <a href="{% url 'dashboard_view' username=request.user.username %}">
                  <i class="fas fa-home"></i>
                </a>
              </li>
              {% comment "Page actuelle : Certificats" %}
              <li class="breadcrumb-item active" aria-current="page">Certificats</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
{% endcomment %}

{% comment "Contenu principal de la page : liste des certificats" %}
<div class="container-fluid mt--6">
  <div class="row">
    <div class="col-xl-12">
      <div class="card">
        {% comment "En-tête de la carte avec le titre" %}
        <div class="card-header border-0">
          <div class="row align-items-center">
            <div class="col">
              <h3 class="mb-0">Certificats de formation</h3>
            </div>
          </div>
        </div>

        {% comment "Corps de la carte affichant les certificats ou un message si aucun certificat" %}
        <div class="card-body">
          {% if certificates %}
          {% comment "Boucle sur chaque certificat de l'utilisateur" %}
          <div class="row">
            {% for certificate in certificates %}
            <div class="col-xl-4 col-md-6 mb-4">
              <div class="card">
                <div class="card-body text-center">
                  {% comment "Icône du certificat" %}
                  <div class="mb-3">
                    <i class="ni ni-badge text-primary" style="font-size: 3rem;"></i>
                  </div>
                  {% comment "Nom de la langue du certificat" %}
                  <h5 class="card-title">{{ certificate.language.name }}</h5>
                  {% comment "Niveau et date de délivrance du certificat" %}
                  <p class="card-text">
                    <strong>Niveau :</strong> {{ certificate.level }}<br>
                    <strong>Délivré le :</strong> {{ certificate.issued_date|date:"d/m/Y" }}
                  </p>

                  {% comment "Bouton de téléchargement si le fichier existe" %}
                  {% if certificate.certificate_file %}
                  <a href="{{ certificate.certificate_file.url }}" class="btn btn-primary" target="_blank">
                    <i class="ni ni-cloud-download-95"></i> Télécharger
                  </a>
                  {% else %}
                  {% comment "Indication que le certificat est en cours de génération" %}
                  <span class="badge badge-warning">En cours de génération</span>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          {% comment "Message affiché si aucun certificat n'est disponible" %}
          <div class="text-center py-5">
            <i class="ni ni-badge text-muted" style="font-size: 4rem;"></i>
            <h4 class="mt-3 text-muted">Aucun certificat disponible</h4>
            <p class="text-muted">
              Vos certificats apparaîtront ici une fois que vous aurez terminé vos formations.
            </p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endcomment %}